# CMSC 398Z - Week 9 - Oct 31st, 2025

## Work in class

For class today, we are going to be working on fixing issues in the congressional-record project. We are going to follow the workflow you would do if you were going to submit a pull request to the github repository, but we are going to do that within gitlab.cs.umd.edu.

* Doing this for real involves making a public pull request, which we cannot ask you to do for a class project.
* However, after Derek and I have had a chance to review your work, you can choose to make a public pull request to merge your changes into the github repository.

We are going ask you to organize by table, with all the students sitting at a table working on the same issue.

* If you don't have access to Claude or gitlab, you can just partner with another student.
* We will have places where we ask all students at a table to stop work and share what they have learned and their thoughts about how to address the issue.
* Eventually, we want to submit only one pull request per issue, but that pull request should mention the help from all students who worked on that issue and want to be publically named.

You will typically run the project with a command such as 

```bash 
uv run python -m congressionalrecord.cli 2025-10-21 2025-10-28 json
```

This will take several seconds per day, and there is no progress bar. It you try to download an entire year, it will take quite a while. 

### Projects with fuzzy requirements

The congressional-records project is an example of something you will often see in the real world: a project with fuzzy requirements. The goal of this project is to download zip files that contain files containing data representing the official congressional record in PDF, HTML and XML formats and extract the data in a useful way to allow for further processing. The PDF and HTML files represent the actual printed pages of the congressional report, the XML files contain meta-data about what each file represents.

However, we don't have a well defined schema as to exactly how information is represented in the HTML files, nor is there a definitive description of how that data should be transformed into JSON in a way that makes it easy to utilize for other applications. The way in which information is represented in HTML files might not be entirely consistent, either as things change over time, or from simple issues such as inconsistencies in things that do not actually result in visually different page images.

So when we look at an issue such as "it doesn't download data for a particular day", "it crashes when trying to download data for a particular day", or "this item seems be be mislabeled", you don't want to just fix that particular issue. Rather, you want to deeply understand why that issue is occurring, see if related issues might be occurring in other cases that aren't flagged in the issue report, and think at a broader level about "is there a better way to handle this situation to make the results better?". There may not be a spec that describes what the code should do in this situation, you might have to propose a good way to handle that situation.

Generally, you shouldn't need to look at a lot of json files yourself. You can download the json files for some dates, and then ask claude to analyze them (e.g., "of all the content items that have properties _X_, analyze their _Y_ attributes").

### Helpful resources

We've already made and landed some pull requests to clear up some issues and make it easier to understand the data being collected by the project. In particular, congressionalrecord/schema.py contains a pydantic schema describing the structure of the json files generated by the project, and docs/schema.md is a description of the schema.

In at least one of these issues, the system is not downloading files for a particular day. If you want to see what files can be downloaded for a particular day, view [https://www.govinfo.gov/app/collection/crec](https://www.govinfo.gov/app/collection/crec).

### Issues we are going address

We've looked at the currently listed issues on the github repository, and identified four that are both non-trivial and should be doable without a huge amount of work, three of which should be easily completable by the end of class. We also identified an issue not currently listed on the github repository.

Bill has already implemented fixes for all of these issues, and Derek is a subject matter expert who can advise you on the data being scraped, what is represented in the json files, and how to craft solutions that will be useful to people using this repository.

The three easier ones:

* [Issue 55](https://github.com/unitedstates/congressional-record/issues/55) Cannot scrape January 3 records from 2012-2025
* [Issue 51](https://github.com/unitedstates/congressional-record/issues/51) Getting "AttributeError: 'NoneType' object has no attribute 'string'"
* [Issue 36](https://github.com/unitedstates/congressional-record/issues/36) speech tagged as title

The following two items are somewhat more open ended. Truly addressing the issues will likely require conversations with our subject matter expert, and might not be something you can complete during class. There may also some overlap between the two issues, as they both have to do with how items get classified.

#### [Issue 10](https://github.com/unitedstates/congressional-record/issues/10) Things that are not getting parsed but could be if desirable

* Note the discussion that the parser does a poor job of classifying things other than speeches.
  * In your work, evaluate whether there are other items that might be useful to classify.
* [Examples of expenditure reports and Constitutional Authority Statement](https://gist.github.com/dwillis/6914f71347dd0b87910cf370172125e1)
* Examples of Expenditure results occur in: 2025-10-21 and 2018-04-24
  * Parsing the Expenditure report would be useful but beyond the scope of this issue. We just want to classify them to make working on parsing them possible.
* Examples for Constitutional Authority Statement are very common, see for example output/2025/2025-10-28/CREC-2025-10-28-pt1-PgH4559-2.json
  * It would be useful to extract the Article and Section from the text of the item

#### Missing speaker_bioguide for speech

content items with kind="speech" in the json files represent a speech by a member of congress, and provide a speaker_bioguide that provides a UUID to information about that member.
Roughly 1/3 of the content items with kind="speech" have a null entry for speaker_bioguide. Examine these, understand why that is the case, and consider ways to make the data more useful.

## How we are going to do work

### Creating a repository in which to do your work

If you download the repository last week to look at it, delete that or rename it. You will need to check out a fresh copy.

* Sign into your gitlab.cs.umd.edu account

* Go to the main Course Group (cs101-fall2025) page.

* Click the "New project" button (in the top right).

* On the "Create new project" screen, you will now see a new tab: "Create from template".

* Inside that tab, you will see a second set of tabs, one of which is "Group" (or the name of your course group).

* When they click the "Group" tab, the Course-Template project will appear as a selectable template.

* They select it, give their new project a name (e.g., jane-doe-project), and set its visibility to Private.

### Downloading the repository

You will need to create an access token for gitlab.cs.umd.edu so that you can use git to make a local copy.

cd to that directory, use git branch to verify the branch you are on.


```bash
git branch
``` 


### Recording what you are working on

Create and switch to your own branch that has your name in it (so it won't clash with that of any other student). For example, I might use

```bash
git checkout -b pugh-assignment
```
If it is not already there, create a directory named student-assignments.
Create a file in this directory with _your name_.md that gives your name, the issue you are working on, and if you are working with 
a partner, there name as well.

Add and commit that file, and then push that change.

### Working on the project

switch back to the main branch of the project. When you do that, the student-assignments directory will disappear (because it doesn't exist on the main branch).

Create and switch to a branch for doing your work. Pick a branch name that includes your name and the issue you are working on.

Do your work on the project.

Add and commit your work as you make progress. You can push your changes to gitlab as often as your like, but do that before you do the pull request. 

When you have are satisfied with your work on the project, push your changes and make a pull request.


## No readings for next week

Take more time to work on the project if needed. Make a pull request no later than Tuesday at noon, even if you don't feel your work is 
complete. We will try to look at your pull requests and provide you with feedback before next class.
